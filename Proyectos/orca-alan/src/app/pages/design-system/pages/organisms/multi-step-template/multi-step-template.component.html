<div class="guide-page">
  <header class="page-header">
    <h1>Plantilla Multi-Pasos</h1>
    <p class="subtitle">
      Template para formularios de varios pasos (wizards). Incluye stepper horizontal,
      header dinamico, area de contenido y barra de navegacion fija.
      <strong>Usado en Crear Proyecto, Crear Cuestionario, etc.</strong>
    </p>
  </header>

  <!-- Guidelines -->
  <app-ds-guidelines
    [dos]="guidelinesDos"
    [donts]="guidelinesDonts"
    [compact]="true"
  />

  <!-- Estructura del Layout -->
  <section class="section">
    <h2><i class="pi pi-th-large"></i> Estructura del Layout</h2>
    <p class="section-description">
      El template multi-pasos sigue una estructura de 4 secciones principales que
      mantienen consistencia visual y de navegacion en todas las paginas wizard.
    </p>

    <div class="layout-diagram">
      <div class="layout-box layout-header">
        <span class="layout-label">page-header</span>
        <span class="layout-desc">Titulo + Subtitulo dinamico</span>
      </div>
      <div class="layout-box layout-stepper">
        <span class="layout-label">stepper-container</span>
        <span class="layout-desc">Indicador de progreso horizontal</span>
      </div>
      <div class="layout-box layout-content">
        <span class="layout-label">content-card</span>
        <span class="layout-desc">Contenido del paso actual (formularios, selecciones, etc.)</span>
      </div>
      <div class="layout-box layout-footer">
        <span class="layout-label">page-footer-fixed</span>
        <span class="layout-desc">Botones: Atras/Cancelar | Siguiente/Guardar</span>
      </div>
    </div>
  </section>

  <!-- Demo Interactivo -->
  <section class="section">
    <h2><i class="pi pi-bolt"></i> Demo Interactivo</h2>
    <p class="section-description">Navega entre los pasos usando los botones o haciendo click en pasos completados.</p>

    <app-ds-preview title="Multi-Step Template">
      <div class="demo-wizard">
        <!-- Mini Header -->
        <div class="demo-header">
          <h3>Crear Elemento</h3>
          <p>{{ steps[pasoActual()].descripcion }}</p>
        </div>

        <!-- Stepper -->
        <div class="stepper-container">
          @for (step of steps; track $index; let i = $index) {
            <div class="step-item"
                 [class.active]="i === pasoActual()"
                 [class.completed]="i < pasoActual()"
                 [class.clickable]="i < pasoActual()"
                 (click)="irAPaso(i)">
              <div class="step-indicator">
                <div class="step-icon">
                  @if (i < pasoActual()) {
                    <i class="pi pi-check"></i>
                  } @else {
                    <i [class]="step.icon"></i>
                  }
                </div>
                @if (i < steps.length - 1) {
                  <div class="step-line" [class.completed]="i < pasoActual()"></div>
                }
              </div>
              <div class="step-content">
                <span class="step-label">{{ step.label }}</span>
                <span class="step-description">{{ step.descripcion }}</span>
              </div>
            </div>
          }
        </div>

        <!-- Content Area -->
        <div class="demo-content-card">
          @switch (pasoActual()) {
            @case (0) {
              <div class="demo-step-content">
                <h4>Paso 1: Informacion Basica</h4>
                <div class="demo-form-field">
                  <label>Nombre</label>
                  <input type="text" pInputText placeholder="Ingresa el nombre" />
                </div>
                <div class="demo-form-field">
                  <label>Descripcion</label>
                  <input type="text" pInputText placeholder="Descripcion opcional" />
                </div>
              </div>
            }
            @case (1) {
              <div class="demo-step-content">
                <h4>Paso 2: Configuracion</h4>
                <p class="text-color-secondary">Aqui van las opciones de configuracion del elemento.</p>
                <div class="demo-options">
                  <div class="demo-option">
                    <i class="pi pi-cog"></i>
                    <span>Opcion A</span>
                  </div>
                  <div class="demo-option">
                    <i class="pi pi-sliders-h"></i>
                    <span>Opcion B</span>
                  </div>
                </div>
              </div>
            }
            @case (2) {
              <div class="demo-step-content">
                <h4>Paso 3: Confirmacion</h4>
                <div class="demo-summary">
                  <i class="pi pi-check-circle text-green-500" style="font-size: 3rem;"></i>
                  <p>Revisa la informacion y confirma para crear el elemento.</p>
                </div>
              </div>
            }
          }
        </div>

        <!-- Footer Buttons -->
        <div class="demo-footer">
          @if (pasoActual() > 0) {
            <p-button
              label="Atras"
              icon="pi pi-arrow-left"
              [outlined]="true"
              (onClick)="anterior()"
            />
          } @else {
            <p-button
              label="Cancelar"
              [text]="true"
            />
          }

          @if (pasoActual() < steps.length - 1) {
            <p-button
              label="Siguiente"
              icon="pi pi-arrow-right"
              iconPos="right"
              (onClick)="siguiente()"
            />
          } @else {
            <p-button
              label="Crear"
              icon="pi pi-check"
              (onClick)="resetDemo()"
            />
          }
        </div>
      </div>
    </app-ds-preview>
  </section>

  <!-- Estados del Stepper -->
  <section class="section">
    <h2><i class="pi pi-sitemap"></i> Componente Stepper</h2>
    <p class="section-description">
      El stepper muestra el progreso a traves de los pasos. Los pasos completados son
      clickeables para navegar hacia atras.
    </p>

    <h3>Estados del Stepper</h3>
    <div class="stepper-states">
      <div class="state-example">
        <h4>Pendiente</h4>
        <div class="step-icon state-pending">
          <i class="pi pi-info-circle"></i>
        </div>
        <p class="text-sm text-color-secondary">Borde gris, icono secundario</p>
      </div>

      <div class="state-example">
        <h4>Activo</h4>
        <div class="step-icon state-active">
          <i class="pi pi-info-circle"></i>
        </div>
        <p class="text-sm text-color-secondary">Fondo primario, icono blanco</p>
      </div>

      <div class="state-example">
        <h4>Completado</h4>
        <div class="step-icon state-completed">
          <i class="pi pi-check"></i>
        </div>
        <p class="text-sm text-color-secondary">Fondo primario, checkmark</p>
      </div>
    </div>

    <h3>Linea Conectora</h3>
    <div class="line-states">
      <div class="line-example">
        <span class="text-sm">Pendiente:</span>
        <div class="step-line"></div>
      </div>
      <div class="line-example">
        <span class="text-sm">Completada:</span>
        <div class="step-line completed"></div>
      </div>
    </div>
  </section>

  <!-- Ancho del Formulario -->
  <section class="section">
    <h2><i class="pi pi-arrows-alt-h"></i> Ancho del Formulario</h2>
    <p class="section-description">
      Los formularios dentro del content-card deben ocupar maximo el 50% del ancho disponible
      para mantener legibilidad y evitar lineas de texto muy largas.
    </p>

    <div class="info-card">
      <h4><i class="pi pi-check-circle text-green-500"></i> Regla de Ancho</h4>
      <ul>
        <li>El <strong>contenedor principal</strong> es full-width (max 1000px centrado)</li>
        <li>Los <strong>formularios</strong> usan <code>max-width: 50%</code> o <code>500px</code></li>
        <li>El <code>min-width: 500px</code> evita que se compriman demasiado</li>
        <li>Esto mejora la experiencia de lectura y completado de formularios</li>
      </ul>
    </div>

    <h3>Ejemplo de Implementacion</h3>
    <app-ds-code-block
      language="scss"
      [code]="'.step-panel,\n.form-content {\n  max-width: 50%;\n  min-width: 500px;\n}'"
    />
  </section>

  <!-- Barra de Navegacion -->
  <section class="section">
    <h2><i class="pi pi-arrows-h"></i> Barra de Navegacion Fija</h2>
    <p class="section-description">
      El footer fijo permanece visible mientras se hace scroll. Respeta el ancho del
      sidebar y tiene z-index adecuado.
    </p>

    <div class="info-card">
      <h4><i class="pi pi-exclamation-triangle text-orange-500"></i> Posicionamiento Importante</h4>
      <ul>
        <li><code>position: fixed</code> con <code>bottom: 0</code></li>
        <li><code>left: 64px</code> para respetar el sidebar</li>
        <li><code>z-index: 5</code> (menor que sidebar z-index: 100)</li>
        <li><code>padding-bottom: 100px</code> en el contenedor principal</li>
      </ul>
    </div>

    <h3>Botones de Navegacion</h3>
    <div class="buttons-demo">
      <div class="button-example">
        <h4>Boton Secundario</h4>
        <button class="btn-atras">
          <i class="pi pi-arrow-left"></i> Atras
        </button>
        <button class="btn-atras">Cancelar</button>
        <p class="text-sm text-color-secondary mt-2">
          Fondo transparente, borde gris. Usado para "Atras" o "Cancelar".
        </p>
      </div>

      <div class="button-example">
        <h4>Boton Primario</h4>
        <button class="btn-siguiente">
          Siguiente <i class="pi pi-arrow-right"></i>
        </button>
        <button class="btn-guardar">
          <i class="pi pi-check"></i> Crear Proyecto
        </button>
        <p class="text-sm text-color-secondary mt-2">
          Fondo primario. Usado para "Siguiente" o accion final.
        </p>
      </div>
    </div>
  </section>

  <!-- Paginas que lo usan -->
  <section class="section">
    <h2><i class="pi pi-link"></i> Paginas que Usan este Template</h2>
    <app-ds-usage-list
      [items]="usageItems"
      type="pages"
    />
  </section>

  <!-- Props Tables -->
  <section class="section">
    <h2><i class="pi pi-list"></i> Clases CSS</h2>
    <p class="section-description">Clases CSS utilizadas en este template.</p>

    <h3>Layout Principal</h3>
    <app-ds-props-table [props]="layoutProps" />

    <h3>Stepper</h3>
    <app-ds-props-table [props]="stepperProps" />

    <h3>Footer / Botones</h3>
    <app-ds-props-table [props]="footerProps" />

    <h3>Ancho de Formularios</h3>
    <app-ds-props-table [props]="formWidthProps" />
  </section>

  <!-- Design Tokens -->
  <section class="section">
    <h2><i class="pi pi-sliders-h"></i> Design Tokens</h2>
    <p class="section-description">Tokens CSS utilizados por este template.</p>

    <div class="tokens-grid">
      @for (token of tokens; track token.name) {
        <div class="token-item">
          <div class="token-preview" [style.background]="token.value"></div>
          <div class="token-info">
            <code>{{ token.name }}</code>
            <span>{{ token.description }}</span>
          </div>
        </div>
      }
    </div>
  </section>

  <!-- Codigo -->
  <section class="section">
    <h2><i class="pi pi-code"></i> Codigo</h2>
    <p class="section-description">Codigo base para implementar este template.</p>
    <app-ds-code-tabs [tabs]="codeTabs" />
  </section>

  <!-- Dark Mode -->
  <section class="section">
    <h2><i class="pi pi-moon"></i> Dark Mode</h2>
    <p class="section-description">
      El template usa tokens semanticos que se adaptan automaticamente a dark mode.
    </p>

    <div class="info-card">
      <h4>Tokens que cambian en Dark Mode</h4>
      <ul>
        <li><code>--surface-ground</code> - Fondo de pagina</li>
        <li><code>--surface-card</code> - Fondo de cards y footer</li>
        <li><code>--surface-border</code> - Bordes</li>
        <li><code>--text-color</code> y <code>--text-color-secondary</code> - Texto</li>
        <li><code>--primary-color</code> se mantiene pero sobre fondos oscuros</li>
      </ul>
    </div>
  </section>

  <!-- Accessibility -->
  <section class="section">
    <h2><i class="pi pi-eye"></i> Accesibilidad</h2>
    <p class="section-description">Consideraciones de accesibilidad para este template.</p>

    <div class="info-card">
      <ul>
        <li><strong>Keyboard:</strong> Todos los botones y pasos clickeables deben ser accesibles con Tab</li>
        <li><strong>Focus visible:</strong> Mantener outline visible en elementos focuseados</li>
        <li><strong>Screen readers:</strong> Anunciar cambios de paso y errores de validacion</li>
        <li><strong>Contraste:</strong> Los estados activo/completado deben tener suficiente contraste</li>
        <li><strong>ARIA:</strong> Usar aria-current="step" en el paso activo</li>
      </ul>
    </div>
  </section>
</div>
